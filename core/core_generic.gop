package core

var _ = defaultEnv.LetFn("multifn", func (env *Env, args Value) (res Value, err error) {
  var vec []Value
  vec, ^err = UnpackArgs(args, 0, -1)
  mfn := &MultiFn{[]*Method{}}
  for i := 0; i < len(vec) - 1; i += 2 {
    fn := vec[i]
    types := vec[i + 1]
    mfn.methods = append(mfn.methods, &Method{fn, types})
  }
  return mfn, nil
})
